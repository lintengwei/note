# ip 地址

网络地址分解成两个域后，带来了一个重要的优点：IP 数据包从网际上的一个网络到达另一个网络时，选择路径可以基于网络而不是主机。在大型的网际中，这一点优势特别明显，因为路由表中只存储网络信息而不是主机信息，这样可以大大简化路由表。。ip 地址以网络号和主机号来表示网络上的主机，只有在相同网络号的计算机之间才可以“直接相同”，不同网络号需要通过网管来互通。但这样划分有些情况不是十分灵活，因此 ip 网络还允许划分更小的玩过，称为子网（subnet）。

## ipv4

ip 地址更具网络号和主机号的数量分为 A，B，C 三类：

- A 类 ip 地址

  - 网络号 0xxxxxxx
  - 0.0.0.0~127.255.255.255
  - 保留地址（1 个） 10.0.0.0~10.255.255.255
  - 可变的 7 位来标识网络号，可变的 24 位来标识主机号，最前 1 位为 “0”，即 A 类网络号的取值介于 1-126 之间。一般为大型网络，全世界总共有 126 个 A 类网络，每个 A 类网络最多可以连接 16777214 台主机。
  - 疑问：
    - 第一位设置为 0 的原因？
    - 主机数应该为为 2^24=16777216，为什么是 16777214 台？
      - 主机号全为 0 表示本网络地址，全为 1 标识本网络的广播地址，所以要减去 2

- B 类 ip 地址

  - 10xxxxxx.xxxxxxxx
  - 128.0.0.0~191.255.255.255
  - 保留地址（16 个） 172.16.0.0~172.31.255.255
  - 可变的 14 位来标识网络号，可变的 16 位来标识主机号，前两位为“10”。因此 B 类网络第一段取值范围为 128-191（1000 0000-1011 1111）(网络号不能以数字 127 开头，数字 127 是专门保留给诊断用的，如 127.0.0.1 是回送地址，用于回路测试），最多可以连接主机数为 65534 台
  - 疑问：
    - 同上

- C 类 ip 地址
  - 110xxxxx.xxxxxxxx.xxxxxxxx
  - 192.0.0.0~223.255.255.255
  - 保留地址（255 个） 192.168.0.0~192.168.255.255
  - 用可变的 21 位来标识网络号，用可变的 8 位来表示主机号，前面三位为“110”。因此 C 类的第一段取值范围为 192-223（1100 0000- 1101 1111） 之间，第一段，第二段和第三段合起来表示网络号。最后一段表示主机号。适用于小型网络，每个 C 类最多可以有 254 台主机。
  - 疑问：
    - 同上

### 子网掩码

因为只有在同一个网络号下的计算机才能“直接”互通，所以有时候为了方便，又把 ip 网络划分为更小的网络，即 VLSM（可变长子网掩码），成为“子网”，子网掩码也就由此产生。主要作用是将 ip 地址划分为更小的网络地址和主机地址来那个部分。子网掩码也是 32 位的地址，对于不同的网络，范围为：

- A 类网络
  - 255.0.0.0
- B 类网络
  - 255.255.0.0
- C 类网络
  - 255.255.255.0

例如：子网掩码可以看出有多少位是网络号，有多少位是主机号： 255.255.255.0 二进制是：11111111 11111111 11111111 00000000

网络号 24 位，即全是 1 主机号 8 位，即全是 0

129.168.1.1 /24 这个、24 就是告诉我们网络号是 24 位，也就相当于告诉我们了子网掩码是：11111111 11111111 11111111 00000000 即：255.255.255.0

172.16.10.33/27 中的/27 也就是说子网掩码是 255.255.255.224 即 27 个全 1 ，11111111 11111111 11111111 11100000

### 网关

又称为网络连接器、协议转换器
