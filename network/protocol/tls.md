# tls

[https://blog.csdn.net/weixin_30531261/article/details/80891360](https://blog.csdn.net/weixin_30531261/article/details/80891360)
[https://blog.csdn.net/qq_30698633/article/details/77895151](https://blog.csdn.net/qq_30698633/article/details/77895151)
[证书格式](https://blog.freessl.cn/ssl-cert-format-introduce/)



是的，根据不同的服务器以及服务器的版本，我们需要用到不同的证书格式，就市面上主流的服务器来说，大概有以下格式：

1. .DER .CER，文件是二进制格式，只保存证书，不保存私钥。
2. .PEM，一般是文本格式，可保存证书，可保存私钥。
3. .CRT，可以是二进制格式，可以是文本格式，与 .DER 格式相同，不保存私钥。
4. .PFX .P12，二进制格式，同时包含证书和私钥，一般有密码保护。
5. .JKS，二进制格式，同时包含证书和私钥，一般有密码保护。

为何需要tls/ssl？

普通的http数据是在网络中以明文的形式传输，会被窃听，篡改，并且存在中间人冒充服务器与客户端通讯。因此tls/ssl需要实现的功能主要有：

- 防止被窃听
  - 数据加密（对称加密，公钥加密）
  - 并且密码不能被预测（伪随机数）
- 防止被篡改
  - 对数据提取指纹（散列函数，消息认证码）
- 防止中间人冒充服务器
  - 认证（数字证书）

以上几个密钥工具合理的组织起来即可实现tls/ssl的安全数据传输通道。

## 使用ssl/tls进行通信

tls又可分为‘tls记录协议’和‘tls握手协议’，其中‘tls握手协议’可在细分为握手协议、密码规格变更协议、警告协议、应用数据协议。而‘tls记录协议’位于‘tls握手协议’的下层，主要负责对通讯数据的加密和解密工作。

> 握手协议

协商决定密码算法和共享密钥。

完成的几个操作：

1. 客户端获得服务器的公钥，完成服务器的认证
2. 服务器获得客户端的公钥，完成客户端的认证（如果需要的话）
3. 客户端和服务器生成了密码通信中使用的共享密钥
4. 客户端和服务器生成了消息认证码中使用的共享密钥

> 密码规格变更协议

负责向通讯对象传达变更密码方式的信号

>警告协议

负责在发生错误的时候把错误传达给对方

> 应用数据协议

将tls上面承载的应用数据传达给通讯对象的协议

> tls记录协议

负责消息的压缩、加密以及数据的认证。其处理过程：



